knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
#install.packages('lubridate')
library(lubridate)
#install.packages('janitor')
library(janitor)
us_conflicts<- read_csv("data/us_conflicts.csv")
View(us_conflicts)
us_conflicts<- us_conflicts %>%
mutate(event_date2 = dmy(event_date))
us_conflicts<- us_conflicts %>%
mutate(event_date = dmy(event_date))
jan_6_conflict<- us_conflicts %>%
filter(admin1 == "District of Columbia" & event_date == "2021-01-06") %>%
select(-data_id, -iso, -iso3, time_precision, -region, -country, -event_id_cnty, -event_id_no_cnty, -timestamp, -time_precision)
blm_conflict<- us_conflicts %>%
filter(admin1 == "District of Columbia" & event_date > "2020-05-30" & event_date < "2020-06-02") %>%
select(-data_id, -iso, -iso3, time_precision, -region, -country, -event_id_cnty, -event_id_no_cnty, -timestamp, -time_precision)
View(blm_conflict)
check_id = us_conflicts %>%
group_by(data_id) %>%
count()
View(check_id)
dc_arrests<- read_csv("data/dc_arrest_data.csv")
dc_arrests<- dc_arrests %>%
clean_names()
dc_arrests<- dc_arrests %>%
clean_names()
View(dc_arrests)
dc_arrests<- dc_arrests %>%
mutate(arrest_date = mdy(arrest_date),
offense_date = mdy(offense_date))
ccn_check  = dc_arrest %>%
group_by(ccn) %>%
count()
ccn_check  = dc_arrests %>%
group_by(ccn) %>%
count()
View(ccn_check)
blm_arrests<- dc_arrests %>%
filter(arrest_date > "2020-05-30" & arrest_date < "2020-06-02") %>%
group_by(arrest_date) %>%
summarise(
arrest_count = n()
)
View(blm_arrests)
blm_arrests<- dc_arrests %>%
filter(arrest_date > "2020-05-30" & arrest_date < "2020-06-02") %>%
group_by(arrest_date) %>%
summarise(
arrest_count = n()
)
blm_offenses<- dc_arrests %>%
filter(offense_date > "2020-05-30" & offense_date < "2020-06-02") %>%
group_by(offense_date) %>%
summarise(
offense_count = n()
)
View(blm_offenses)
blm_arrest_info <- blm_arrests %>%
left_join(blm_offenses, by=c('arrest_date'='offense_date')) %>%
rename(date = arrest_date)
View(blm_arrest_info)
dc_arrest_name = dc_arrests %>%
group_by(defendant_first_name, defendant_last_name, age_at_arrest ) %>%
count()
View(dc_arrest_name)
dc_arrest_name = dc_arrests %>%
filter(arrest_date > "2020-05-30" & arrest_date < "2020-06-02") %>%
group_by(defendant_first_name, defendant_last_name, age_at_arrest ) %>%
count()
dc_offense_name = dc_arrests %>%
filter(offense_date > "2020-05-30" & offense_date < "2020-06-02") %>%
group_by(defendant_first_name, defendant_last_name, age_at_arrest ) %>%
count()
View(dc_offense_name)
dc_arrest_name_all = dc_arrests %>%
group_by(defendant_first_name, defendant_last_name, age_at_arrest ) %>%
count()
View(dc_arrest_name_all)
View(dc_arrests)
##################################Nick Checking Uniqueness of names for riots ######################################
jan6_arrest_name<- dc_arrests %>%
filter(arrest_date > "2021-01-05" & arrest_date < "2021-01-07") %>%
group_by(defendant_first_name, defendant_last_name, age_at_arrest ) %>%
count()
View(jan6_arrest_name)
jan6_arrests<- dc_arrests %>%
filter(arrest_date > "2021-01-05" & arrest_date < "2021-01-07") %>%
group_by(arrest_date) %>%
summarise(
arrest_count = n()
)
View(jan6_arrests)
jan6_arrests_ungrouped <- dc_arrests %>%
filter(arrest_date > "2021-01-05" & arrest_date < "2021-01-07")
View(jan6_arrests_ungrouped)
jan6_offense_name<- dc_arrests %>%
filter(offense_date > "2021-01-05" & offense_date < "2021-01-07") %>%
group_by(defendant_first_name, defendant_last_name, age_at_arrest ) %>%
count()
jan6_arrest_name<- dc_arrests %>%
filter(arrest_date > "2021-01-05" & arrest_date < "2021-01-07") %>%
group_by(defendant_first_name, defendant_last_name, age_at_arrest ) %>%
count()
jan6_offense_name<- dc_arrests %>%
filter(offense_date > "2021-01-05" & offense_date < "2021-01-07") %>%
group_by(defendant_first_name, defendant_last_name, age_at_arrest ) %>%
count()
jan6_arrests_ungrouped <- dc_arrests %>%
filter(arrest_date > "2021-01-05" & arrest_date < "2021-01-07")
jan6_offense_ungrouped <- dc_arrests %>%
filter(offense_date > "2021-01-05" & offense_date < "2021-01-07")
View(jan6_offense_name)
arrests_by_offense_date<- bind_rows(jan6_arrest_info, blm_arrest_info)
#blm arrests/offenses
blm_arrests<- dc_arrests %>%
filter(arrest_date > "2020-05-30" & arrest_date < "2020-06-02") %>%
group_by(arrest_date) %>%
summarise(
arrest_count = n()
)
blm_offenses<- dc_arrests %>%
filter(offense_date > "2020-05-30" & offense_date < "2020-06-02") %>%
group_by(offense_date) %>%
summarise(
offense_count = n()
)
blm_arrest_info <- blm_arrests %>%
left_join(blm_offenses, by=c('arrest_date'='offense_date')) %>%
rename(date = arrest_date)
# skipping 6-4 for some reason???
#insurrection arrests/offenses
jan6_arrests<- dc_arrests %>%
filter(arrest_date > "2021-01-05" & arrest_date < "2021-01-07") %>%
group_by(arrest_date) %>%
summarise(
arrest_count = n()
)
jan6_offenses<- dc_arrests %>%
filter(arrest_date > "2021-01-05" & arrest_date < "2021-01-07") %>%
group_by(offense_date) %>%
summarise(
offense_count = n()
)
jan6_arrest_info <- jan6_arrests %>%
left_join(jan6_offenses, by=c('arrest_date'='offense_date')) %>%
rename(date = arrest_date)
################################# Nick Checking uniqueness of names for blm ################################
blm_dc_arrest_name = dc_arrests %>%
filter(arrest_date > "2020-05-30" & arrest_date < "2020-06-02") %>%
group_by(defendant_first_name, defendant_last_name, age_at_arrest ) %>%
count()
blm_dc_offense_name = dc_arrests %>%
filter(offense_date > "2020-05-30" & offense_date < "2020-06-02") %>%
group_by(defendant_first_name, defendant_last_name, age_at_arrest ) %>%
count()
blm_dc_arrest_name_all = dc_arrests %>%
group_by(defendant_first_name, defendant_last_name, age_at_arrest ) %>%
count()
#####
##################################Nick Checking Uniqueness of names for riots ######################################
jan6_arrest_name<- dc_arrests %>%
filter(arrest_date > "2021-01-05" & arrest_date < "2021-01-07") %>%
group_by(defendant_first_name, defendant_last_name, age_at_arrest ) %>%
count()
jan6_offense_name<- dc_arrests %>%
filter(offense_date > "2021-01-05" & offense_date < "2021-01-07") %>%
group_by(defendant_first_name, defendant_last_name, age_at_arrest ) %>%
count()
jan6_arrests_ungrouped <- dc_arrests %>%
filter(arrest_date > "2021-01-05" & arrest_date < "2021-01-07")
jan6_offense_ungrouped <- dc_arrests %>%
filter(offense_date > "2021-01-05" & offense_date < "2021-01-07")
arrests_by_offense_date<- bind_rows(jan6_arrest_info, blm_arrest_info) %>%
select(-arrest_count)
View(arrests_by_offense_date)
blm_charges<- dc_arrests %>%
filter(offense_date > "2020-05-29" & offense_date < "2020-06-06") %>%
group_by(charge_s, offense_date) %>%
summarise(
count=n()
) %>%
arrange(desc(count))
View(blm_charges)
blm_charges_split<- blm_charges %>%
mutate(charge_s = strsplit(str_squish(as.character(charge_s)), ","))
View(blm_charges_split)
blm_charges_split<- blm_charges %>%
mutate(charge_s = strsplit(str_squish(as.character(charge_s)), ",")) %>%
unnest(charge_s)
blm_charges_split<- blm_charges %>%
mutate(charge_s = strsplit(str_squish(as.character(charge_s)), ",")) %>%
unnest(charge_s) %>%
mutate(charge_s = str_trim(charge_s,side="both")) %>%
group_by(charge_s, offense_date) %>%
summarise(
sum_arrests = sum(count)
)
View(jan6_arrests)
